<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EasyEats - Suas Receitas Favoritas</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <i class="fas fa-utensils"></i>
                    EasyEats
                </a>
                <ul class="nav-links">
                    <li><a href="index.html" class="active" data-section="home">Início</a></li>
                    <li><a href="#" data-section="favorites">Favoritos</a></li>
                    <li><a href="#" data-section="add-recipe">Adicionar Receita</a></li>
                    <li><a href="#" data-section="contact">Contato</a></li>
                    <li id="user-section" style="display: none;">
                        <div class="user-info">
                            <span class="user-name" id="user-name"></span>
                            <button class="logout-btn" id="logout-btn">Sair</button>
                        </div>
                    </li>
                    <li id="login-section">
                        <a href="#" data-section="login">Login</a>
                    </li>
                </ul>
            </nav>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Buscar receitas...">
                <button id="search-btn"><i class="fas fa-search"></i></button>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Descubra Receitas Incríveis</h1>
            <p>Encontre as melhores receitas para todas as ocasiões. Fáceis de preparar e deliciosas!</p>
        </div>
    </section>

    <main class="container">
        <section id="home-section" class="section active">
            <h2 class="section-title">Receitas Populares</h2>
            <div class="recipes-grid" id="recipes-container">
                <!-- As receitas serão carregadas aqui via JavaScript -->
            </div>
        </section>

        <section id="favorites-section" class="section">
            <h2 class="section-title">Suas Receitas Favoritas</h2>
            <div class="recipes-grid" id="favorites-container">
                <!-- As receitas favoritas serão carregadas aqui via JavaScript -->
            </div>
            <div class="empty-favorites" id="empty-favorites">
                <i class="far fa-heart" style="font-size: 3rem; margin-bottom: 15px;"></i>
                <h3>Nenhuma receita favorita ainda</h3>
                <p>Adicione receitas aos seus favoritos clicando no ícone de coração</p>
            </div>
        </section>

        <section id="add-recipe-section" class="section">
            <h2 class="section-title">Adicionar Nova Receita</h2>
            <div class="add-recipe-form">
                <form id="add-recipe-form">
                    <div class="form-group">
                        <label for="recipe-title">Título da Receita</label>
                        <input type="text" id="recipe-title" name="recipe-title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="recipe-image">URL da Imagem</label>
                        <input type="url" id="recipe-image" name="recipe-image" placeholder="https://exemplo.com/imagem.jpg">
                    </div>
                    
                    <div class="form-group">
                        <label for="recipe-prep-time">Tempo de Preparo</label>
                        <input type="text" id="recipe-prep-time" name="recipe-prep-time" placeholder="ex: 45 min" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="recipe-difficulty">Dificuldade</label>
                        <select id="recipe-difficulty" name="recipe-difficulty" required>
                            <option value="">Selecione</option>
                            <option value="Fácil">Fácil</option>
                            <option value="Médio">Médio</option>
                            <option value="Difícil">Difícil</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="recipe-servings">Porções</label>
                        <input type="number" id="recipe-servings" name="recipe-servings" min="1" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Ingredientes</label>
                        <div id="ingredients-container">
                            <div class="ingredient-item">
                                <input type="text" class="ingredient-input" placeholder="ex: 2 xícaras de farinha de trigo" required>
                                <button type="button" class="remove-btn"><i class="fas fa-times"></i></button>
                            </div>
                        </div>
                        <button type="button" class="add-btn" id="add-ingredient"><i class="fas fa-plus"></i> Adicionar Ingrediente</button>
                    </div>
                    
                    <div class="form-group">
                        <label>Modo de Preparo</label>
                        <div id="instructions-container">
                            <div class="instruction-item">
                                <textarea class="instruction-input" placeholder="Descreva o primeiro passo..." required></textarea>
                                <button type="button" class="remove-btn"><i class="fas fa-times"></i></button>
                            </div>
                        </div>
                        <button type="button" class="add-btn" id="add-instruction"><i class="fas fa-plus"></i> Adicionar Passo</button>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Adicionar Receita</button>
                </form>
            </div>
            
            <div class="user-recipes" id="user-recipes-section" style="display: none;">
                <h3>Suas Receitas Adicionadas</h3>
                <div class="recipes-grid" id="user-recipes-container">
                    <!-- As receitas do usuário serão carregadas aqui via JavaScript -->
                </div>
                <div class="empty-history" id="empty-user-recipes">
                    <i class="far fa-file" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <h3>Você ainda não adicionou nenhuma receita</h3>
                    <p>Adicione sua primeira receita usando o formulário acima</p>
                </div>
            </div>
        </section>

        <section id="login-section-page" class="section">
            <h2 class="section-title">Login</h2>
            <div class="login-form">
                <form id="login-form">
                    <div class="form-group">
                        <label for="username">Nome de Usuário</label>
                        <input type="text" id="username" name="username" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Senha</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Entrar</button>
                </form>
                <div style="margin-top: 20px; text-align: center;">
                    <p>Contas de teste:</p>
                    <p><strong>Usuário:</strong> Ian | <strong>Senha:</strong> 12345</p>
                    <p><strong>Usuário:</strong> teste | <strong>Senha:</strong> 123456789</p>
                </div>
            </div>
        </section>

        <section id="contact-section" class="section">
            <h2 class="section-title">Entre em Contato</h2>
            <div class="contact-form">
                <form id="contact-form">
                    <div class="form-group">
                        <label for="name">Nome</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="email">E-mail</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="subject">Assunto</label>
                        <input type="text" id="assunto" name="assunto" required>
                    </div>
                    <div class="form-group">
                        <label for="message">Mensagem</label>
                        <textarea id="reclame" name="reclame" required></textarea>
                    </div>
                    <button href="/back/reclame.php" type="submit" class="btn btn-primary" >Enviar Mensagem</button>
                </form>
            </div>
            
            <div class="contact-info">
                <div class="contact-card">
                    <i class="fas fa-envelope"></i>
                    <h3>E-mail</h3>
                    <p>contato@easyeats.com</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-phone"></i>
                    <h3>Telefone</h3>
                    <p>(62) 9999-9999</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Endereço</h3>
                    <p>UniEvangélica</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-clock"></i>
                    <h3>Horário de Atendimento</h3>
                    <p>Segunda a Sexta: 9h às 18h</p>
                </div>
            </div>
        </section>

        <div id="recipe-detail" class="recipe-detail">
            <!-- O conteúdo da receita será carregado aqui via JavaScript -->
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Sobre Nós</h3>
                    <p>EasyEats é o seu companheiro culinário para descobrir e preparar receitas incríveis no conforto do seu lar.</p>
                </div>
                <div class="footer-section">
                    <h3>Links Rápidos</h3>
                    <ul>
                        <li><a href="test.html" data-section="home">Início</a></li>
                        <li><a href="#" data-section="favorites">Favoritos</a></li>
                        <li><a href="#" data-section="add-recipe">Adicionar Receita</a></li>
                        <li><a href="#" data-section="contact">Contato</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Redes Sociais</h3>
                    <ul>
                        <li><a href="https://web.whatsapp.com/"><i class="fab fa-whatsapp"></i> whatsapp</a></li>
                        <li><a href="https://www.instagram.com/ian__couto/"><i class="fab fa-instagram"></i> Instagram</a></li>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                        <li><a href="https://www.linkedin.com/in/ian-correa-couto-b212a126b/"><i class="fab fa-linkedin"></i> linkedin</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 EasyEats. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        // Dados das receitas
        let recipes = [
            {
                id: 1,
                title: "Risotto de Cogumelos",
                image: "https://images.unsplash.com/photo-1476124369491-e7addf5db371?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                prepTime: "45 min",
                difficulty: "Médio",
                servings: 4,
                ingredients: [
                    "1 xícara de arroz arbório",
                    "200g de cogumelos variados",
                    "1 cebola média picada",
                    "2 dentes de alho picados",
                    "1/2 xícara de vinho branco seco",
                    "1 litro de caldo de legumes quente",
                    "1/2 xícara de queijo parmesão ralado",
                    "2 colheres de sopa de manteiga",
                    "Sal e pimenta a gosto",
                    "Salsinha picada para decorar"
                ],
                instructions: [
                    "Em uma panela grande, refogue a cebola e o alho na manteiga até ficarem dourados.",
                    "Adicione os cogumelos e cozinhe até que estejam macios.",
                    "Acrescente o arroz arbório e mexa por 1-2 minutos até que os grãos estejam levemente tostados.",
                    "Despeje o vinho branco e mexa até que seja completamente absorvido.",
                    "Adicione o caldo de legumes quente, uma concha de cada vez, mexendo sempre até que o líquido seja absorvido antes de adicionar mais.",
                    "Continue este processo por cerca de 18-20 minutos, até que o arroz esteja cremoso e al dente.",
                    "Retire do fogo e misture o queijo parmesão.",
                    "Tempere com sal e pimenta a gosto.",
                    "Sirva imediatamente, decorado com salsinha picada."
                ],
                comments: [
                    {
                        id: 1,
                        author: "Maria Silva",
                        date: "2023-10-15",
                        content: "Ficou delicioso! Minha família adorou."
                    },
                    {
                        id: 2,
                        author: "João Santos",
                        date: "2023-10-20",
                        content: "Receita fácil de seguir e o resultado foi incrível."
                    }
                ],
                addedBy: "system"
            },
            {
                id: 2,
                title: "Frango à Parmegiana",
                image: "https://www.receiteria.com.br/wp-content/uploads/file-de-frango-parmegiana.jpeg",
                prepTime: "60 min",
                difficulty: "Fácil",
                servings: 4,
                ingredients: [
                    "4 filés de frango",
                    "2 ovos batidos",
                    "1 xícara de farinha de rosca",
                    "1/2 xícara de farinha de trigo",
                    "200g de mussarela fatiada",
                    "1 xícara de molho de tomate",
                    "Sal, pimenta e alho em pó a gosto",
                    "Óleo para fritar"
                ],
                instructions: [
                    "Tempere os filés de frango com sal, pimenta e alho em pó.",
                    "Passe cada filé na farinha de trigo, depois no ovo batido e por último na farinha de rosca.",
                    "Frite os filés em óleo quente até dourar dos dois lados.",
                    "Coloque os filés em uma forma untada.",
                    "Cubra cada filé com molho de tomate e fatias de mussarela.",
                    "Leve ao forno pré-aquecido a 180°C por cerca de 15 minutos, ou até que o queijo esteja derretido e dourado.",
                    "Sirva com arroz branco e batatas fritas."
                ],
                comments: [
                    {
                        id: 1,
                        author: "Ana Costa",
                        date: "2023-10-10",
                        content: "Perfeito para o almoço de domingo!"
                    }
                ],
                addedBy: "system"
            },
            {
                id: 3,
                title: "Salada Caesar",
                image: "https://images.unsplash.com/photo-1546793665-c74683f339c1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                prepTime: "20 min",
                difficulty: "Fácil",
                servings: 2,
                ingredients: [
                    "1 pé de alface romana",
                    "1/2 xícara de queijo parmesão ralado",
                    "1 xícara de croutons",
                    "2 filés de anchova (opcional)",
                    "Para o molho:",
                    "1/2 xícara de maionese",
                    "2 colheres de sopa de queijo parmesão ralado",
                    "1 colher de sopa de suco de limão",
                    "1 colher de chá de mostarda Dijon",
                    "1 dente de alho picado",
                    "Sal e pimenta a gosto"
                ],
                instructions: [
                    "Lave e seque bem as folhas de alface romana. Corte em pedaços médios.",
                    "Para o molho, em uma tigela pequena, misture a maionese, parmesão, suco de limão, mostarda e alho.",
                    "Tempere com sal e pimenta a gosto.",
                    "Em uma saladeira grande, coloque a alface, adicione o molho e misture suavemente.",
                    "Polvilhe com parmesão ralado e croutons.",
                    "Se desejar, adicione os filés de anchova por cima.",
                    "Sirva imediatamente."
                ],
                comments: [],
                addedBy: "system"
            },
            {
                id: 4,
                title: "Brownie de Chocolate",
                image: "https://images.unsplash.com/photo-1564355808539-22fda35bed7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                prepTime: "40 min",
                difficulty: "Fácil",
                servings: 9,
                ingredients: [
                    "200g de chocolate meio amargo",
                    "150g de manteiga",
                    "1 xícara de açúcar",
                    "3 ovos",
                    "1 xícara de farinha de trigo",
                    "1/2 xícara de cacau em pó",
                    "1 pitada de sal",
                    "1 colher de chá de essência de baunilha"
                ],
                instructions: [
                    "Pré-aqueça o forno a 180°C. Unte uma forma quadrada de 20cm.",
                    "Derreta o chocolate com a manteiga em banho-maria ou no micro-ondas.",
                    "Em uma tigela, bata os ovos com o açúcar até obter um creme claro e fofo.",
                    "Adicione a baunilha e o chocolate derretido à mistura de ovos, mexendo bem.",
                    "Peneire a farinha, o cacau e o sal sobre a mistura e incorpore delicadamente.",
                    "Despeje a massa na forma preparada e alise a superfície.",
                    "Asse por 25-30 minutos, ou até que a superfície esteja firme, mas o centro ainda um pouco úmido.",
                    "Deixe esfriar completamente antes de cortar em quadrados."
                ],
                comments: [
                    {
                        id: 1,
                        author: "Carlos Lima",
                        date: "2023-10-05",
                        content: "O brownie ficou com a textura perfeita, bem úmido por dentro."
                    },
                    {
                        id: 2,
                        author: "Fernanda Oliveira",
                        date: "2023-10-08",
                        content: "Adicionei nozes e ficou ainda mais gostoso!"
                    }
                ],
                addedBy: "system"
            },
            {
                id: 5,
                title: "Lasanha de Carne",
                image: "https://images.unsplash.com/photo-1574894709920-11b28e7367e3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                prepTime: "90 min",
                difficulty: "Médio",
                servings: 8,
                ingredients: [
                    "500g de massa para lasanha",
                    "500g de carne moída",
                    "1 cebola picada",
                    "2 dentes de alho picados",
                    "800g de molho de tomate",
                    "200g de presunto fatiado",
                    "200g de mussarela fatiada",
                    "100g de queijo parmesão ralado",
                    "1 xícara de requeijão",
                    "Azeite, sal, pimenta e orégano a gosto"
                ],
                instructions: [
                    "Pré-aqueça o forno a 180°C.",
                    "Em uma panela, refogue a cebola e o alho no azeite.",
                    "Adicione a carne moída e cozinhe até dourar.",
                    "Acrescente o molho de tomate, tempere com sal, pimenta e orégano. Cozinhe por 10 minutos.",
                    "Em uma forma refratária, monte a lasanha: comece com uma camada de molho, depois massa, presunto, mussarela e requeijão.",
                    "Repita as camadas até terminar os ingredientes, finalizando com molho e queijo parmesão.",
                    "Cubra com papel alumínio e asse por 30 minutos.",
                    "Retire o papel alumínio e asse por mais 10 minutos para dourar o queijo.",
                    "Deixe descansar por 10 minutos antes de servir."
                ],
                comments: [],
                addedBy: "system"
            },

            {
                id: 6,
                title: "macarrão cremoso na panela de pressão",
                image: "https://anamariabrogui.com.br/assets/uploads/receitas/fotos/usuario-2168-3af11ad71c5b7d463e3a2ae695b4b448.jpg",
                prepTime: "15 min",
                difficulty: "Médio",
                servings: 4,
                ingredients: [
                    "1 fio de azeite",
                    "1 cebola média picada",
                    "2 dentes de alho picados",
                    "250g de carne moída ou linguiça calabresa em rodelas (opcional)",
                    "1 lata de molho de tomate (cerca de 300g)",
                    "Sal e pimenta do reino a gosto",
                    "1 pitada de páprica defumada (opcional)",
                    "250g de macarrão (tipo parafuso, penne, ou ninho)",
                    "Água quente suficiente para cobrir o macarrão",
                    "1 caixinha de creme de leite (200g)",
                    "Queijo parmesão ralado e cheiro-verde picado a gosto para finaliza"
                ],
                instructions: [
                    "1 - Refogue o tempero: Em uma panela de pressão, aqueça o azeite e refogue a cebola e o alho até dourarem. Se optar por usar carne moída ou calabresa, adicione e frite até dourar.",
                    "2 - Adicione o molho: Acrescente o molho de tomate, sal, pimenta e páprica. Misture bem e deixe refogar por alguns minutos.",
                    "3 - Acrescente o macarrão e a água: Adicione o macarrão cru à panela. Cubra com água quente até que a massa esteja submersa. Certifique-se de que o nível total de ingredientes e líquidos não ultrapasse a marca de segurança da panela de pressão.",
                    "4 - Cozinhe sob pressão: Tampe a panela de pressão. Assim que ela pegar pressão (começar a chiar), conte de 3 a 5 minutos para a maioria dos tipos de macarrão. O tempo exato pode variar ligeiramente com o tipo de massa; verifique as instruções da embalagem para referência.",
                    "5 - Finalize o prato: Desligue o fogo e, com cuidado, libere a pressão (utilize o método de liberação natural ou rápida, dependendo da sua panela).",
                    "6 - Deixe cremoso: Abra a panela e adicione o creme de leite e, se desejar, o requeijão. Misture bem até ficar homogêneo e cremoso.",
                    "7 - Sirva: Finalize com queijo parmesão ralado e cheiro-verde picado. Sirva imediatamente."
                ]
            },
        ];

        // Elementos DOM
        const recipesContainer = document.getElementById('recipes-container');
        const favoritesContainer = document.getElementById('favorites-container');
        const userRecipesContainer = document.getElementById('user-recipes-container');
        const recipeDetail = document.getElementById('recipe-detail');
        const homeSection = document.getElementById('home-section');
        const favoritesSection = document.getElementById('favorites-section');
        const addRecipeSection = document.getElementById('add-recipe-section');
        const loginSectionPage = document.getElementById('login-section-page');
        const contactSection = document.getElementById('contact-section');
        const emptyFavorites = document.getElementById('empty-favorites');
        const emptyUserRecipes = document.getElementById('empty-user-recipes');
        const userRecipesSection = document.getElementById('user-recipes-section');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const navLinks = document.querySelectorAll('.nav-links a');
        const contactForm = document.getElementById('contact-form');
        const addRecipeForm = document.getElementById('add-recipe-form');
        const loginForm = document.getElementById('login-form');
        const ingredientsContainer = document.getElementById('ingredients-container');
        const instructionsContainer = document.getElementById('instructions-container');
        const addIngredientBtn = document.getElementById('add-ingredient');
        const addInstructionBtn = document.getElementById('add-instruction');
        const userSection = document.getElementById('user-section');
        const loginSection = document.getElementById('login-section');
        const userNameElement = document.getElementById('user-name');
        const logoutBtn = document.getElementById('logout-btn');

        // Usuários pré-definidos
        const users = {
            "Ian": {
                password: "12345",
                favorites: [],
                addedRecipes: []
            },
            "teste": {
                password: "123456789",
                favorites: [],
                addedRecipes: []
            }
        };

        // Estado atual
        let currentUser = null;
        let nextRecipeId = 6; // Para novas receitas
        let nextCommentId = 10; // Para novos comentários

        // Carregar dados do localStorage
        function loadUserData() {
            const savedUsers = localStorage.getItem('recipeUsers');
            if (savedUsers) {
                const parsedUsers = JSON.parse(savedUsers);
                Object.keys(parsedUsers).forEach(username => {
                    if (users[username]) {
                        users[username].favorites = parsedUsers[username].favorites || [];
                        users[username].addedRecipes = parsedUsers[username].addedRecipes || [];
                    }
                });
            }
        }

        // Salvar dados no localStorage
        function saveUserData() {
            localStorage.setItem('recipeUsers', JSON.stringify(users));
        }

        // Verificar se há usuário logado
        function checkLoggedInUser() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser && users[savedUser]) {
                currentUser = savedUser;
                updateUIForLoggedInUser();
            }
        }

        // Atualizar UI para usuário logado
        function updateUIForLoggedInUser() {
            userSection.style.display = 'block';
            loginSection.style.display = 'none';
            userNameElement.textContent = currentUser;
            
            // Mostrar seção de receitas do usuário se estiver na página de adicionar receita
            if (addRecipeSection.classList.contains('active')) {
                userRecipesSection.style.display = 'block';
                updateUserRecipesDisplay();
            }
            
            // Atualizar favoritos
            updateFavoritesDisplay();
        }

        // Atualizar UI para usuário deslogado
        function updateUIForLoggedOutUser() {
            userSection.style.display = 'none';
            loginSection.style.display = 'block';
            userRecipesSection.style.display = 'none';
            
            // Redirecionar para a página inicial se estiver em uma página que requer login
            if (favoritesSection.classList.contains('active') || addRecipeSection.classList.contains('active')) {
                homeSection.classList.add('active');
                favoritesSection.classList.remove('active');
                addRecipeSection.classList.remove('active');
                navLinks.forEach(l => l.classList.remove('active'));
                document.querySelector('.nav-links a[data-section="home"]').classList.add('active');
            }
        }

        // Função para fazer login
        function login(username, password) {
            if (users[username] && users[username].password === password) {
                currentUser = username;
                localStorage.setItem('currentUser', username);
                updateUIForLoggedInUser();
                return true;
            }
            return false;
        }

        // Função para fazer logout
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUIForLoggedOutUser();
        }

        // Função para renderizar receitas
        function renderRecipes(recipesToRender, container, showFavoriteBtn = true) {
            container.innerHTML = '';
            
            recipesToRender.forEach(recipe => {
                const isFavorite = currentUser && users[currentUser].favorites.includes(recipe.id);
                
                const recipeCard = document.createElement('div');
                recipeCard.className = 'recipe-card';
                recipeCard.innerHTML = `
                    <img src="${recipe.image}" alt="${recipe.title}" class="recipe-img">
                    <div class="recipe-content">
                        <h3 class="recipe-title">${recipe.title}</h3>
                        <div class="recipe-meta">
                            <span><i class="far fa-clock"></i> ${recipe.prepTime}</span>
                            <span><i class="fas fa-signal"></i> ${recipe.difficulty}</span>
                            <span><i class="fas fa-user-friends"></i> ${recipe.servings} porções</span>
                        </div>
                        <div class="recipe-actions">
                            <button class="btn btn-primary view-recipe" data-id="${recipe.id}">Ver Receita</button>
                            ${showFavoriteBtn && currentUser ? 
                                `<button class="favorite-btn ${isFavorite ? 'active' : ''}" data-id="${recipe.id}">
                                    <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                                </button>` : ''
                            }
                        </div>
                    </div>
                `;
                
                container.appendChild(recipeCard);
            });
            
            // Adicionar event listeners para os botões
            addRecipeEventListeners();
        }

        // Função para adicionar event listeners
        function addRecipeEventListeners() {
            // Botões de visualizar receita
            document.querySelectorAll('.view-recipe').forEach(button => {
                button.addEventListener('click', function() {
                    const recipeId = parseInt(this.getAttribute('data-id'));
                    showRecipeDetail(recipeId);
                });
            });
            
            // Botões de favorito
            document.querySelectorAll('.favorite-btn').forEach(button => {
                button.addEventListener('click', function() {
                    if (!currentUser) {
                        alert('Você precisa estar logado para favoritar receitas.');
                        return;
                    }
                    const recipeId = parseInt(this.getAttribute('data-id'));
                    toggleFavorite(recipeId);
                });
            });
        }

        // Função para mostrar detalhes da receita
        function showRecipeDetail(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;
            
            const isFavorite = currentUser && users[currentUser].favorites.includes(recipe.id);
            
            recipeDetail.innerHTML = `
                <div class="recipe-detail-header">
                    <h2 class="recipe-detail-title">${recipe.title}</h2>
                    ${currentUser ? 
                        `<button class="favorite-btn ${isFavorite ? 'active' : ''}" data-id="${recipe.id}">
                            <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                        </button>` : ''
                    }
                </div>
                <img src="${recipe.image}" alt="${recipe.title}" class="recipe-detail-img">
                <div class="recipe-info">
                    <div class="info-card">
                        <i class="far fa-clock"></i>
                        <h4>Tempo de Preparo</h4>
                        <p>${recipe.prepTime}</p>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-signal"></i>
                        <h4>Dificuldade</h4>
                        <p>${recipe.difficulty}</p>
                    </div>
                    <div class="info-card">
                        <i class="fas fa-user-friends"></i>
                        <h4>Porções</h4>
                        <p>${recipe.servings}</p>
                    </div>
                </div>
                <div class="ingredients">
                    <h3>Ingredientes</h3>
                    <ul>
                        ${recipe.ingredients.map(ingredient => `<li>${ingredient}</li>`).join('')}
                    </ul>
                </div>
                <div class="instructions">
                    <h3>Modo de Preparo</h3>
                    <ol>
                        ${recipe.instructions.map(instruction => `<li>${instruction}</li>`).join('')}
                    </ol>
                </div>
                
                <div class="comments-section">
                    <h3>Comentários (${recipe.comments.length})</h3>
                    
                    ${currentUser ? `
                    <div class="comment-form">
                        <form id="comment-form-${recipe.id}">
                            <div class="form-group">
                                <label for="comment-author-${recipe.id}">Seu Nome</label>
                                <input type="text" id="comment-author-${recipe.id}" value="${currentUser}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="comment-content-${recipe.id}">Seu Comentário</label>
                                <textarea id="comment-content-${recipe.id}" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Adicionar Comentário</button>
                        </form>
                    </div>
                    ` : '<p>Faça login para comentar</p>'}
                    
                    <div id="comments-list-${recipe.id}">
                        ${recipe.comments.length > 0 ? 
                            recipe.comments.map(comment => `
                                <div class="comment">
                                    <div class="comment-header">
                                        <span class="comment-author">${comment.author}</span>
                                        <span class="comment-date">${comment.date}</span>
                                    </div>
                                    <div class="comment-content">${comment.content}</div>
                                </div>
                            `).join('') : 
                            '<div class="no-comments">Nenhum comentário ainda. Seja o primeiro a comentar!</div>'
                        }
                    </div>
                </div>
                
                <button class="back-btn" id="back-to-recipes">Voltar para Receitas</button>
            `;
            
            recipeDetail.classList.add('active');
            homeSection.classList.remove('active');
            favoritesSection.classList.remove('active');
            addRecipeSection.classList.remove('active');
            loginSectionPage.classList.remove('active');
            contactSection.classList.remove('active');
            
            // Adicionar event listeners
            if (currentUser) {
                document.querySelector('.favorite-btn').addEventListener('click', function() {
                    toggleFavorite(recipe.id);
                });
                
                // Event listener para formulário de comentário
                document.getElementById(`comment-form-${recipe.id}`).addEventListener('submit', function(e) {
                    e.preventDefault();
                    addComment(recipe.id);
                });
            }
            
            document.getElementById('back-to-recipes').addEventListener('click', function() {
                recipeDetail.classList.remove('active');
                homeSection.classList.add('active');
            });
        }

        // Função para adicionar comentário
        function addComment(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;
            
            const contentInput = document.getElementById(`comment-content-${recipeId}`);
            const content = contentInput.value.trim();
            
            if (!content) return;
            
            // Adicionar comentário
            const newComment = {
                id: nextCommentId++,
                author: currentUser,
                date: new Date().toISOString().split('T')[0],
                content: content
            };
            
            recipe.comments.push(newComment);
            
            // Atualizar a exibição
            showRecipeDetail(recipeId);
            
            // Limpar formulário
            contentInput.value = '';
        }

        // Função para alternar favoritos
        function toggleFavorite(recipeId) {
            if (!currentUser) return;
            
            const userFavorites = users[currentUser].favorites;
            const index = userFavorites.indexOf(recipeId);
            
            if (index === -1) {
                // Adicionar aos favoritos
                userFavorites.push(recipeId);
            } else {
                // Remover dos favoritos
                userFavorites.splice(index, 1);
            }
            
            // Salvar no localStorage
            saveUserData();
            
            // Atualizar a exibição
            updateFavoritesDisplay();
            
            // Recarregar as receitas para atualizar os botões de favorito
            renderRecipes(recipes, recipesContainer);
            
            // Se estiver na página de detalhes da receita, atualizar o botão lá também
            const detailFavoriteBtn = recipeDetail.querySelector('.favorite-btn');
            if (detailFavoriteBtn && parseInt(detailFavoriteBtn.getAttribute('data-id')) === recipeId) {
                detailFavoriteBtn.classList.toggle('active');
                detailFavoriteBtn.querySelector('i').className = userFavorites.includes(recipeId) ? 'fas fa-heart' : 'far fa-heart';
            }
        }

        // Função para atualizar a exibição dos favoritos
        function updateFavoritesDisplay() {
            if (!currentUser) {
                favoritesContainer.style.display = 'none';
                emptyFavorites.style.display = 'block';
                emptyFavorites.innerHTML = `
                    <i class="far fa-heart" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <h3>Faça login para ver seus favoritos</h3>
                    <p>Entre na sua conta para acessar suas receitas favoritas</p>
                `;
                return;
            }
            
            const favoriteRecipes = recipes.filter(recipe => 
                users[currentUser].favorites.includes(recipe.id)
            );
            
            if (favoriteRecipes.length > 0) {
                favoritesContainer.style.display = 'grid';
                emptyFavorites.style.display = 'none';
                renderRecipes(favoriteRecipes, favoritesContainer, false);
            } else {
                favoritesContainer.style.display = 'none';
                emptyFavorites.style.display = 'block';
                emptyFavorites.innerHTML = `
                    <i class="far fa-heart" style="font-size: 3rem; margin-bottom: 15px;"></i>
                    <h3>Nenhuma receita favorita ainda</h3>
                    <p>Adicione receitas aos seus favoritos clicando no ícone de coração</p>
                `;
            }
        }

        // Função para atualizar a exibição das receitas do usuário
        function updateUserRecipesDisplay() {
            if (!currentUser) {
                userRecipesContainer.style.display = 'none';
                emptyUserRecipes.style.display = 'block';
                return;
            }
            
            const userRecipeIds = users[currentUser].addedRecipes;
            const userRecipesList = recipes.filter(recipe => userRecipeIds.includes(recipe.id));
            
            if (userRecipesList.length > 0) {
                userRecipesContainer.style.display = 'grid';
                emptyUserRecipes.style.display = 'none';
                renderRecipes(userRecipesList, userRecipesContainer, false);
            } else {
                userRecipesContainer.style.display = 'none';
                emptyUserRecipes.style.display = 'block';
            }
        }

        // Função para buscar receitas
        function searchRecipes() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                renderRecipes(recipes, recipesContainer);
                return;
            }
            
            const filteredRecipes = recipes.filter(recipe => 
                recipe.title.toLowerCase().includes(searchTerm) ||
                recipe.ingredients.some(ingredient => ingredient.toLowerCase().includes(searchTerm))
            );
            
            renderRecipes(filteredRecipes, recipesContainer);
        }

        // Função para adicionar campo de ingrediente
        function addIngredientField() {
            const ingredientItem = document.createElement('div');
            ingredientItem.className = 'ingredient-item';
            ingredientItem.innerHTML = `
                <input type="text" class="ingredient-input" placeholder="ex: 2 xícaras de farinha de trigo" required>
                <button type="button" class="remove-btn"><i class="fas fa-times"></i></button>
            `;
            
            ingredientsContainer.appendChild(ingredientItem);
            
            // Adicionar event listener para o botão de remover
            ingredientItem.querySelector('.remove-btn').addEventListener('click', function() {
                if (ingredientsContainer.children.length > 1) {
                    ingredientItem.remove();
                }
            });
        }

        // Função para adicionar campo de instrução
        function addInstructionField() {
            const instructionItem = document.createElement('div');
            instructionItem.className = 'instruction-item';
            instructionItem.innerHTML = `
                <textarea class="instruction-input" placeholder="Descreva o passo..." required></textarea>
                <button type="button" class="remove-btn"><i class="fas fa-times"></i></button>
            `;
            
            instructionsContainer.appendChild(instructionItem);
            
            // Adicionar event listener para o botão de remover
            instructionItem.querySelector('.remove-btn').addEventListener('click', function() {
                if (instructionsContainer.children.length > 1) {
                    instructionItem.remove();
                }
            });
        }

        // Navegação entre seções
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                const section = this.getAttribute('data-section');
                
                // Atualizar navegação ativa
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // Mostrar seção correspondente
                homeSection.classList.remove('active');
                favoritesSection.classList.remove('active');
                addRecipeSection.classList.remove('active');
                loginSectionPage.classList.remove('active');
                contactSection.classList.remove('active');
                recipeDetail.classList.remove('active');
                
                if (section === 'home') {
                    homeSection.classList.add('active');
                } else if (section === 'favorites') {
                    if (!currentUser) {
                        loginSectionPage.classList.add('active');
                        document.querySelector('.nav-links a[data-section="login"]').classList.add('active');
                        this.classList.remove('active');
                    } else {
                        favoritesSection.classList.add('active');
                        updateFavoritesDisplay();
                    }
                } else if (section === 'add-recipe') {
                    if (!currentUser) {
                        loginSectionPage.classList.add('active');
                        document.querySelector('.nav-links a[data-section="login"]').classList.add('active');
                        this.classList.remove('active');
                    } else {
                        addRecipeSection.classList.add('active');
                        userRecipesSection.style.display = 'block';
                        updateUserRecipesDisplay();
                    }
                } else if (section === 'login') {
                    loginSectionPage.classList.add('active');
                } else if (section === 'contact') {
                    contactSection.classList.add('active');
                }
            });
        });

        // Event listeners para links no footer
        document.querySelectorAll('.footer-section a[data-section]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const section = this.getAttribute('data-section');
                
                // Atualizar navegação ativa
                navLinks.forEach(l => l.classList.remove('active'));
                document.querySelector(`.nav-links a[data-section="${section}"]`).classList.add('active');
                
                // Mostrar seção correspondente
                homeSection.classList.remove('active');
                favoritesSection.classList.remove('active');
                addRecipeSection.classList.remove('active');
                loginSectionPage.classList.remove('active');
                contactSection.classList.remove('active');
                recipeDetail.classList.remove('active');
                
                if (section === 'home') {
                    homeSection.classList.add('active');
                } else if (section === 'favorites') {
                    if (!currentUser) {
                        loginSectionPage.classList.add('active');
                        document.querySelector('.nav-links a[data-section="login"]').classList.add('active');
                    } else {
                        favoritesSection.classList.add('active');
                        updateFavoritesDisplay();
                    }
                } else if (section === 'add-recipe') {
                    if (!currentUser) {
                        loginSectionPage.classList.add('active');
                        document.querySelector('.nav-links a[data-section="login"]').classList.add('active');
                    } else {
                        addRecipeSection.classList.add('active');
                        userRecipesSection.style.display = 'block';
                        updateUserRecipesDisplay();
                    }
                } else if (section === 'contact') {
                    contactSection.classList.add('active');
                }
            });
        });

        // Event listener para formulário de contato
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Simular envio do formulário
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            alert(`Obrigado, ${name}! Sua mensagem foi enviada com sucesso. Entraremos em contato em breve.`);
            
            // Limpar formulário
            contactForm.reset();
        });

        // Event listener para formulário de login
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (login(username, password)) {
                alert(`Bem-vindo, ${username}!`);
                loginForm.reset();
                homeSection.classList.add('active');
                loginSectionPage.classList.remove('active');
                document.querySelector('.nav-links a[data-section="home"]').classList.add('active');
            } else {
                alert('Usuário ou senha incorretos!');
            }
        });

        // Event listener para formulário de adicionar receita
        addRecipeForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert('Você precisa estar logado para adicionar receitas.');
                return;
            }
            
            // Coletar dados do formulário
            const title = document.getElementById('recipe-title').value;
            const image = document.getElementById('recipe-image').value || 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80';
            const prepTime = document.getElementById('recipe-prep-time').value;
            const difficulty = document.getElementById('recipe-difficulty').value;
            const servings = document.getElementById('recipe-servings').value;
            
            // Coletar ingredientes
            const ingredients = [];
            document.querySelectorAll('.ingredient-input').forEach(input => {
                if (input.value.trim()) {
                    ingredients.push(input.value.trim());
                }
            });
            
            // Coletar instruções
            const instructions = [];
            document.querySelectorAll('.instruction-input').forEach(textarea => {
                if (textarea.value.trim()) {
                    instructions.push(textarea.value.trim());
                }
            });
            
            // Validar dados
            if (!title || !prepTime || !difficulty || !servings || ingredients.length === 0 || instructions.length === 0) {
                alert('Por favor, preencha todos os campos obrigatórios.');
                return;
            }
            
            // Criar nova receita
            const newRecipe = {
                id: nextRecipeId++,
                title: title,
                image: image,
                prepTime: prepTime,
                difficulty: difficulty,
                servings: parseInt(servings),
                ingredients: ingredients,
                instructions: instructions,
                comments: [],
                addedBy: currentUser
            };
            
            // Adicionar à lista de receitas
            recipes.push(newRecipe);
            
            // Adicionar ao histórico do usuário
            users[currentUser].addedRecipes.push(newRecipe.id);
            
            // Salvar dados
            saveUserData();
            
            // Recarregar a lista de receitas
            renderRecipes(recipes, recipesContainer);
            
            // Atualizar receitas do usuário
            updateUserRecipesDisplay();
            
            // Mostrar mensagem de sucesso
            alert('Receita adicionada com sucesso!');
            
            // Limpar formulário
            addRecipeForm.reset();
            
            // Resetar campos dinâmicos
            ingredientsContainer.innerHTML = '';
            instructionsContainer.innerHTML = '';
            
            // Adicionar um campo de cada
            addIngredientField();
            addInstructionField();
        });

        // Event listeners para botões de adicionar campos
        addIngredientBtn.addEventListener('click', addIngredientField);
        addInstructionBtn.addEventListener('click', addInstructionField);

        // Event listener para botão de logout
        logoutBtn.addEventListener('click', logout);

        // Event listeners para botões de remover existentes
        document.querySelectorAll('.remove-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                if (this.parentElement.parentElement.children.length > 1) {
                    this.parentElement.remove();
                }
            });
        });

        // Event listeners
        searchBtn.addEventListener('click', searchRecipes);
        searchInput.addEventListener('keyup', function(e) {
            if (e.key === 'Enter') {
                searchRecipes();
            }
        });

        // Inicialização
        loadUserData();
        checkLoggedInUser();
        renderRecipes(recipes, recipesContainer);
        updateFavoritesDisplay();
    </script>
</body>
</html>